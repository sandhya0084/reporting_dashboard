{% extends "base.html" %} {% block content %}
<h2 class="mb-4">Generate Reports</h2>

<form method="POST" class="mb-4">
  {{ form.hidden_tag() }}
  <div class="row">
    <div class="col-md-3">
      {{ form.period.label(class="form-label") }} {{
      form.period(class="form-select") }}
    </div>
    <div class="col-md-3">
      {{ form.start_date.label(class="form-label") }} {{
      form.start_date(class="form-control") }}
    </div>
    <div class="col-md-3">
      {{ form.end_date.label(class="form-label") }} {{
      form.end_date(class="form-control") }}
    </div>
    <div class="col-md-3 d-flex align-items-end">
      {{ form.submit(class="btn btn-primary w-100") }}
    </div>
  </div>
</form>

{% if reports %}
<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Client</th>
        <th>Period Type</th>
        <th>Date Range</th>
        <th>Total Contacts</th>
        <th>Successful Interactions</th>
        <th>Conversion Rate</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for report in reports %}
      <tr>
        <td>{{ report.client.name }}</td>
        <td>{{ report.period_type }}</td>
        <td>{{ report.date_range }}</td>
        <td>{{ report.total_contacts }}</td>
        <td>{{ report.successful_interactions }}</td>
        <td>{{ report.conversion_rate|round(2) }}%</td>
        <td>
          <a href="#" class="btn btn-sm btn-info">View Details</a>
          <a href="#" class="btn btn-sm btn-secondary">Download</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<p class="text-muted">No reports found for the selected criteria.</p>
{% endif %} {% endblock %}
